// Generated by CoffeeScript 1.3.3
(function() {
  var TIMEOUT, Wd, should, testCurrent, testWithBrowser, wd, _ref;

  _ref = require('../../index'), wd = _ref.wd, Wd = _ref.Wd;

  should = require('should');

  TIMEOUT = 30000;

  testWithBrowser = function(opt) {
    return describe("basic browsing", function() {
      var _ref1, _ref2;
      return it((((_ref1 = opt.desired) != null ? _ref1.browserName : void 0) != null ? "using " + ((_ref2 = opt.desired) != null ? _ref2.browserName : void 0) : "without passing browser"), function(done) {
        var browser;
        this.timeout(opt.timeout || TIMEOUT);
        browser = null;
        switch (opt.type) {
          case 'remote':
            browser = wd.remote(opt.remoteConfig);
            break;
          case 'headless':
            browser = wd.headless();
        }
        return Wd({
          "with": browser
        }, function() {
          var caps, queryField;
          should.exist(this.status());
          if (typeof browserName !== "undefined" && browserName !== null) {
            this.init({
              browserName: "" + browserName
            });
          } else {
            this.init(opt.desired);
          }
          caps = this.sessionCapabilities();
          should.exist(caps);
          if (typeof browserName !== "undefined" && browserName !== null) {
            should.exist(caps.browserName);
          }
          this.get("http://saucelabs.com/test/guinea-pig");
          this.title().toLowerCase().should.include('sauce labs');
          queryField = this.elementById('i_am_a_textbox');
          this.type(queryField, "Hello World");
          this.type(queryField, "\n");
          this.quit();
          return done();
        });
      });
    });
  };

  testCurrent = function(opt) {
    return describe("wd.current()", function() {
      return it("browsing with using wd.current()", function(done) {
        var browser, myOwnTitle;
        this.timeout(opt.timeout || TIMEOUT);
        browser = null;
        switch (opt.type) {
          case 'remote':
            browser = wd.remote(opt.remoteConfig);
            break;
          case 'headless':
            browser = wd.headless();
        }
        myOwnTitle = function() {
          return wd.current().title();
        };
        return Wd({
          "with": browser
        }, function() {
          if (typeof browserName !== "undefined" && browserName !== null) {
            this.init({
              browserName: "" + browserName
            });
          } else {
            this.init(opt.desired);
          }
          this.get("http://saucelabs.com/test/guinea-pig");
          myOwnTitle().toLowerCase().should.include('sauce labs');
          this.quit();
          return done();
        });
      });
    });
  };

  exports.testWithBrowser = testWithBrowser;

  exports.testCurrent = testCurrent;

}).call(this);
