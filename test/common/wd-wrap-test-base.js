// Generated by CoffeeScript 1.3.3
(function() {
  var TIMEOUT, WdWrap, browse, browser, getBrowser, passingBrowser, should, someText, wd, withoutPassingBrowser, _ref;

  _ref = require('../../index'), wd = _ref.wd, WdWrap = _ref.WdWrap;

  should = require('should');

  browser = null;

  someText = null;

  TIMEOUT = 30000;

  describe("wd-sync", function() {
    return describe("WdWrap", function() {});
  });

  browse = function() {
    var queryField;
    this.init();
    this.get("http://saucelabs.com/test/guinea-pig");
    this.title().toLowerCase().should.include('sauce labs');
    queryField = this.elementById('i_am_a_textbox');
    this.type(queryField, "Hello World");
    this.type(queryField, "\n");
    return this.quit();
  };

  getBrowser = function(type) {
    switch (type) {
      case 'remote':
        return wd.remote();
      case 'headless':
        return wd.headless();
    }
  };

  passingBrowser = function(type) {
    before(function(done) {
      browser = getBrowser(type);
      return done();
    });
    return it("should work", WdWrap({
      "with": function() {
        return browser;
      },
      pre: function() {
        this.timeout(TIMEOUT);
        return someText = 'Test1';
      }
    }, function() {
      someText.should.equal('Test1');
      return browse.apply(this);
    }));
  };

  withoutPassingBrowser = function(type) {
    WdWrap = WdWrap({
      pre: function() {
        this.timeout(TIMEOUT);
        return someText = 'Test2';
      },
      "with": function() {
        return browser;
      }
    });
    before(function(done) {
      browser = getBrowser(type);
      return done();
    });
    return it("should work", WdWrap(function() {
      someText.should.equal('Test2');
      return browse.apply(this);
    }));
  };

  exports.browse = browse;

  exports.passingBrowser = passingBrowser;

  exports.withoutPassingBrowser = withoutPassingBrowser;

}).call(this);
