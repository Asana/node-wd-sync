// Generated by CoffeeScript 1.3.3
(function() {
  var TIMEOUT, WdWrap, browse, browser, getBrowser, passingBrowser, should, someText, wd, withoutPassingBrowser, _ref;

  _ref = require('../../index'), wd = _ref.wd, WdWrap = _ref.WdWrap;

  should = require('should');

  browser = null;

  someText = null;

  TIMEOUT = 30000;

  describe("wd-sync", function() {
    return describe("WdWrap", function() {});
  });

  browse = function(opt) {
    var queryField;
    this.init(opt.desired);
    this.get("http://saucelabs.com/test/guinea-pig");
    this.title().toLowerCase().should.include('sauce labs');
    queryField = this.elementById('i_am_a_textbox');
    this.type(queryField, "Hello World");
    this.type(queryField, "\n");
    return this.quit();
  };

  getBrowser = function(opt) {
    switch (opt.type) {
      case 'remote':
        return wd.remote(opt.remoteConfig);
      case 'headless':
        return wd.headless();
    }
  };

  passingBrowser = function(opt) {
    return describe("wd-wrap tests", function() {
      return describe("passing browser", function() {
        before(function(done) {
          browser = getBrowser(opt);
          return done();
        });
        return it("should work", WdWrap({
          "with": function() {
            return browser;
          },
          pre: function() {
            this.timeout(opt.timeout || TIMEOUT);
            return someText = 'Test1';
          }
        }, function() {
          someText.should.equal('Test1');
          return browse.apply(this, [opt]);
        }));
      });
    });
  };

  withoutPassingBrowser = function(opt) {
    WdWrap = WdWrap({
      pre: function() {
        this.timeout(opt.timeout || TIMEOUT);
        return someText = 'Test2';
      },
      "with": function() {
        return browser;
      }
    });
    return describe("wd-wrap tests", function() {
      return describe("without passing browser", function() {
        before(function(done) {
          browser = getBrowser(opt);
          return done();
        });
        return it("should work", WdWrap(function() {
          someText.should.equal('Test2');
          return browse.apply(this, [opt]);
        }));
      });
    });
  };

  exports.browse = browse;

  exports.passingBrowser = passingBrowser;

  exports.withoutPassingBrowser = withoutPassingBrowser;

}).call(this);
